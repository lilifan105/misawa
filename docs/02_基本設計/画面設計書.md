# 文書管理システム - 画面設計書

## 1. 画面遷移図

![画面遷移図](https://www.plantuml.com/plantuml/png/bLJ1Rjf05Bo_hzXp9Nu0HIYXXwfIJxrLLGvki5A4WShOog6g15w5aeGe7Age3OGKGe4cjOLAMYWWyJ4FsyjVL6OD9c13U_E-dNaxCs_Nknb5a1KrAO4ILoIHM9SVhNBVDcfsAOzQ3xK_IFD8lv8GiJyDfzVrQQvdjuPckGkGISHJxmHPI9AC8YWYUG-4H8M3nA6SLbEnfsafBU_i98LuAX8XB-A7RvMef8f-c8pwPWvv9KfI-iW1fUMOACy092e91mdu0F3woJu9XI84gOvQ1xK6qYwN1R1USw5PfDInGhyXhI0T8JqXOSBkpbbxP1LAvkaD03VWZrruSFpD5V2S9lqiQxPOhMqt1eu-_mOUtcfKx8UwgovC-78ho_uod1P_UgpB3cjUyE9MBllUjHywIrodECtrhTFg1YxIwYp8AwUczKcO86tEldyZ7R6sRXfN03wUDYLk5OQedGMn_ELorA-ILQsueWFeB_UUBOCN7VQUyx9ftB1Q4S0V5oZ0lD3iuzQZrBPrM9qnTmq-eroRS7t0xiuNJ7V2WOXDMPj6SJB8R-RwNgx9sB3qsxdSHsaiSNhjQJdl2Pqj0oaduzcvNNP_vgMoL0mYRhb7uACbS8wJyRMfV_ul2cewqbkaNTI6IEy1V8nu_bZscDyFp-AF6kRwBcjrE_1KtjuT7wo-mt-9PTEhNlj3EW-R5-keDP4M07R5L4nDIdy1)

---

## 2. 画面一覧

### 2.1 ログイン画面
**目的**: ユーザー認証

**主要機能**:
- メールアドレス・パスワード入力
- ログインボタン
- パスワードリセットリンク

**権限**: 全ユーザー

---

### 2.2 ダッシュボード
**目的**: システムのホーム画面

**主要機能**:
- 最近閲覧した文書一覧
- 承認待ち文書一覧（承認者のみ）
- 新着文書通知
- クイック検索バー
- メニューナビゲーション

**権限**: 全ログインユーザー

**画面要素**:
- ヘッダー: ロゴ、検索バー、ユーザーメニュー
- サイドバー: メニュー（文書一覧、検索、新規登録、マイページ）
- メインエリア: 文書カード表示

---

### 2.3 文書検索画面
**目的**: 文書の検索・絞り込み

**主要機能**:
- キーワード検索
- カテゴリ絞り込み
- 発番部署絞り込み
- 日付範囲指定
- AI検索（RAG）切り替え
- 検索結果一覧表示

**権限**: 全ログインユーザー

**画面要素**:
- 検索フォーム
- フィルター（カテゴリ、部署、日付）
- 検索結果リスト（タイトル、発番日、カテゴリ、サムネイル）
- ページネーション

---

### 2.4 RAG検索結果画面
**目的**: AI検索結果の表示

**主要機能**:
- AI生成回答表示
- 参照元文書リスト
- 関連度スコア表示
- 参照文書へのリンク

**権限**: 全ログインユーザー

**画面要素**:
- AI回答エリア
- 参照文書カード（タイトル、関連度、抜粋）
- フィードバックボタン

---

### 2.5 文書詳細画面
**目的**: 文書の閲覧

**主要機能**:
- PDF表示
- 文書メタデータ表示
- 添付ファイル一覧
- 承認履歴表示
- 版管理（過去バージョン表示）
- アクションボタン（編集、承認申請、ダウンロード）

**権限**: 閲覧権限を持つユーザー

**画面要素**:
- PDFビューア
- 文書情報パネル（文書番号、タイトル、カテゴリ、発番日、発番部署）
- 添付ファイルリスト
- 承認フロー表示
- アクションボタン

---

### 2.6 文書登録画面
**目的**: 新規文書の登録

**主要機能**:
- 文書情報入力フォーム
- PDFファイルアップロード
- 添付ファイルアップロード
- カテゴリ選択
- 公開範囲設定
- プレビュー機能

**権限**: 投稿者以上

**画面要素**:
- 入力フォーム（タイトル、カテゴリ、発番部署、発番日、概要）
- ファイルアップロードエリア
- 公開範囲設定（部署選択、グループ選択）
- 登録ボタン、キャンセルボタン

---

### 2.7 文書登録確認画面
**目的**: 登録内容の確認

**主要機能**:
- 入力内容の確認表示
- 登録実行
- 修正へ戻る

**権限**: 投稿者以上

---

### 2.8 文書編集画面
**目的**: 既存文書の編集

**主要機能**:
- 文書情報編集
- PDFファイル差し替え
- 版管理（新バージョン作成）
- 変更履歴記録

**権限**: 文書作成者または管理者

**画面要素**:
- 編集フォーム（文書登録画面と同様）
- 現在の文書情報表示
- 保存ボタン、キャンセルボタン

---

### 2.9 承認申請画面
**目的**: 文書の承認申請

**主要機能**:
- 承認者選択
- コメント入力
- 申請実行

**権限**: 投稿者以上

---

### 2.10 承認者選択画面
**目的**: 承認フローの設定

**主要機能**:
- 承認者リスト表示
- 承認順序設定
- 申請完了

**権限**: 投稿者以上

---

### 2.11 マイページ
**目的**: ユーザー設定・個人情報管理

**主要機能**:
- プロフィール表示・編集
- パスワード変更
- 通知設定
- 閲覧履歴
- 登録文書一覧

**権限**: 全ログインユーザー

---

## 3. 共通UI要素

### 3.1 ヘッダー
- ロゴ（ホームへのリンク）
- グローバル検索バー
- 通知アイコン
- ユーザーメニュー（マイページ、ログアウト）

### 3.2 サイドバー
- ダッシュボード
- 文書検索
- 新規登録
- マイページ
- 管理画面（管理者のみ）

### 3.3 フッター
- コピーライト
- ヘルプリンク
- お問い合わせ

---

## 4. レスポンシブデザイン

### 4.1 デスクトップ（1024px以上）
- サイドバー常時表示
- 3カラムレイアウト

### 4.2 タブレット（768px - 1023px）
- サイドバー折りたたみ
- 2カラムレイアウト

### 4.3 モバイル（767px以下）
- ハンバーガーメニュー
- 1カラムレイアウト
- タッチ操作最適化

---

## 5. UIコンポーネント

### 5.1 ボタン
- プライマリボタン: 主要アクション（登録、保存）
- セカンダリボタン: 補助アクション（キャンセル、戻る）
- 危険ボタン: 削除など

### 5.2 フォーム
- テキスト入力
- セレクトボックス
- 日付ピッカー
- ファイルアップロード
- チェックボックス
- ラジオボタン

### 5.3 カード
- 文書カード（サムネイル、タイトル、メタデータ）
- 通知カード

### 5.4 モーダル
- 確認ダイアログ
- エラーメッセージ
- 成功メッセージ

---

## 6. アクセシビリティ

- WCAG 2.1 AA準拠
- キーボード操作対応
- スクリーンリーダー対応
- 適切なコントラスト比
- フォーカスインジケーター

---

## 7. 技術仕様

### 7.1 フロントエンド
- **フレームワーク**: React 18+
- **UIライブラリ**: Material-UI / Ant Design
- **状態管理**: React Context / Zustand
- **ルーティング**: React Router

### 7.2 デザインシステム
- **カラーパレット**: プライマリ、セカンダリ、アクセント、グレースケール
- **タイポグラフィ**: フォントファミリー、サイズ、行間
- **スペーシング**: 8pxグリッドシステム
- **ブレークポイント**: 768px, 1024px, 1440px
